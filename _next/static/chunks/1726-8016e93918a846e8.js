(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1726],{98527:function(e,n,t){"use strict";t.d(n,{Z:function(){return P}});var i=t(43692),a=t(25789),r=t(8014),s=t(56168),u=t(2215),c=t(86719),o=t(28261),d=t(59126),l=t(62044),p=t(42299),y=t(20496),f=t(37033),m=t(90856),h=t(32478),b=(0,y.k)((function(){var e;return{walletAddress:(e={background:"blue",borderRadius:50,padding:"5px 20px",fontSize:15},(0,p.Z)(e,"background","rgba( 255, 255, 255, 0.25 )"),(0,p.Z)(e,"backdropFilter","blur( 4px )"),(0,p.Z)(e,"border","1px solid rgba( 255, 255, 255, 0.18 )"),e)}})),v=function(e){var n=e.balance,t=e.currency,i=((0,l.Z)("common").t,b().classes),a=(0,c.qL)({onSuccess:function(e){console.log("Success",e)}}).disconnectAsync,u=(0,c.mA)({onDisconnect:function(){console.log("disconnected..")}}),d=(u.isConnected,u.address),p=(u.isConnecting,u.isDisconnected,(0,c.LN)().chain);return(0,s.useEffect)((function(){t&&p&&p.id!==t.id&&a()}),[p,t]),(0,r.jsx)(r.Fragment,{children:n&&d&&(0,r.jsxs)(f.Z,{position:"apart",children:[(0,r.jsxs)(f.Z,{spacing:5,children:[(0,r.jsxs)("div",{className:i.walletAddress,children:[d.substring(0,6),"...",d.substring(d.length-4)]}),(0,r.jsx)(m.A,{onClick:function(){return a()},children:(0,r.jsx)(h.Z,{})})]}),(0,r.jsxs)(o.x,{weight:"bold",children:[Number(null===n||void 0===n?void 0:n.formatted).toFixed(5)," ",null===n||void 0===n?void 0:n.symbol]})]})})},T=t(5447),x=t(99728),g=t(3125),E=t(78357),N=t(80916),_=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"getBuyCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"idx","type":"uint256"}],"name":"getBuyRecord","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"coinId","type":"uint256"},{"internalType":"uint256","name":"adsType","type":"uint256"}],"name":"payWithBNB","outputs":[],"stateMutability":"payable","type":"function"},{"stateMutability":"payable","type":"receive"}]'),j=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"getBuyCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"idx","type":"uint256"}],"name":"getBuyRecord","outputs":[{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address payable","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"coinId","type":"uint256"},{"internalType":"uint256","name":"adsType","type":"uint256"}],"name":"payWithETH","outputs":[],"stateMutability":"payable","type":"function"},{"stateMutability":"payable","type":"receive"}]'),C=t(12636),I=t(57217),w=t(42664),A=t(9975),S=t(75332),Z=function(e){var n=e.requestId,t=e.coinId,i=e.payAmount,a=e.currency,u=e.balance,p=(0,l.Z)("common").t,y=(0,s.useState)(),m=y[0],h=y[1],b=(0,S.useRouter)(),v=(0,s.useState)(!0),Z=v[0],O=v[1],k=(0,s.useState)(!1),M=k[0],F=k[1],P=(0,s.useState)(""),R=P[0],B=P[1],D=(0,s.useState)(),G=D[0],W=D[1],L=(0,s.useState)(),z=(L[0],L[1],null!==(z=(0,c.mA)({onDisconnect:function(){F(!1)}}))?z:(0,g.Z)(new TypeError("Cannot destructure undefined"))),H=(0,c.PJ)({address:"0x137d423ECc99EbE6Ad612caC9C81964184629E2c",abi:a.id==w.zG.ETH?j:_,functionName:a.id==w.zG.ETH?"payWithETH":"payWithBNB",args:[t,n],overrides:{value:C.parseEther(i)},chainId:a.id,enabled:t>0&&a,onError:function(e){console.error("prepare-contract-err ".concat(e))}}).config,J="1",U="2";(0,s.useEffect)((function(){u&&i&&(parseFloat(u.formatted)<parseFloat(i)?B(p("INSUFFICIENT_FUNDS_CHECKOUT",{amount:i,currency:a.nativeCurrency.symbol})):(W(J),B("")))}),[u]);var X=(0,c.GG)((0,x.Z)((0,T.Z)({},H),{mode:"recklesslyUnprepared",onSuccess:function(){F(!1)},onError:function(e){console.error("write-error-".concat(e))},contractError:function(e){console.log("contract-err-".concat(e))}})),Y=X.write,q=X.isSuccess,K=(X.error,X.data),Q=(0,c.BX)({chainId:a.id,hash:null===K||void 0===K?void 0:K.hash}).isSuccess;(0,s.useEffect)((function(){if(Q||G==U){var e=setInterval((function(){V()}),5e3);return function(){return clearInterval(e)}}V()}),[Q,G]);var V=function(){I.Z.checkPayable(t).then((function(e){if(!e.success)throw e.message;if(e.data&&(h(e.data),e.data.status&&setTimeout((function(){b.push(w.h$.COIN_DETAIL.replace(":slug",e.data.slug))}),2e3),e.data.transaction&&!e.data.status))return W(U),void F(!1);G==J&&F(!0)})).catch((function(e){(0,A.x2)(e.response.data.message)})).finally((function(){O(!1)}))};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(E.K,{gap:5,children:[Z&&(0,r.jsx)(N.a,{}),q&&!Q&&null==m&&(0,r.jsx)("div",{children:p("PENDING_TRANSACTION")}),(Q||(null===m||void 0===m?void 0:m.transaction))&&(0,r.jsxs)(f.Z,{noWrap:!0,children:[(0,r.jsx)(N.a,{}),(0,r.jsx)(o.x,{children:p("PENDING_TXN_CONFIRMATION")})]}),(null===m||void 0===m?void 0:m.status)&&(0,r.jsx)("div",{children:p("TXN_APPROVED_REFRESH_NOW")}),R&&(0,r.jsx)(o.x,{children:R})]}),M&&(0,r.jsx)(d.z,{fullWidth:!0,loading:Z,disabled:!Y,onClick:function(){return null===Y||void 0===Y?void 0:Y()},children:p("PAY_FOR_EXPRESS_LISTING",{amount:i,currency:a.nativeCurrency.symbol})})]})},O=t(62139),k=t(49573),M=t(29096),F=new(function(){function e(){(0,O.Z)(this,e)}return(0,k.Z)(e,[{key:"initPayment",value:function(e,n,t){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return[4,M.Z.post(w.T5.PAYABLE_INIT_PAYMENT,{promotion_id:e,coin_id:n,currency:t})];case 1:return[2,i.sent().data]}}))}))()}}]),e}()),P=function(e){var n=e.coinId,t=e.selectedChain,p=(0,u.k_)(),y=p.open;(0,p.setDefaultChain)(t);var f=(0,c.mA)({onDisconnect:function(){}}),m=f.isConnected,h=f.address,b=(0,c.qL)().disconnectAsync,T=(0,c.KQ)({address:h}).data,x=(0,l.Z)("common").t,g=(0,s.useState)(!1),E=g[0],N=g[1],_=(0,s.useState)(),j=_[0],C=_[1];(0,s.useEffect)((function(){N(!0)}),[]),(0,s.useEffect)((function(){t&&I()}),[t]);var I=function(){F.initPayment([1],n,Number(t.id)).then((function(e){if(!e.success)throw e.message;C(e.data)})).catch((function(e){b()}))};return(0,r.jsx)(r.Fragment,{children:E&&(0,r.jsxs)(r.Fragment,{children:[j&&(0,r.jsx)(o.x,{children:x("CANT_WAIT_PAY_AMOUNT",{amount:null===j||void 0===j?void 0:j.amount,currency:t.nativeCurrency.symbol})}),!m&&j&&(0,r.jsx)(d.z,{onClick:(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,y()];case 1:return[2,e.sent()]}}))})),children:x("CONNECT_WALLET_TO_PAY")}),h&&m&&(0,r.jsx)(v,{address:h,balance:T,currency:t}),h&&j&&t&&(0,r.jsx)(Z,{balance:T,address:h,coinId:n,currency:t,payAmount:j.amount.toString(),requestId:j.id}),!m&&(0,r.jsx)(d.z,{children:(0,r.jsx)("a",{href:"https://t.me/moonlistgirl",target:"_blank",children:(0,r.jsx)(o.x,{children:x("CONTACT_TG",{handle:"moonlistgirl"})})})})]})})}},29668:function(e,n,t){"use strict";var i=t(8014),a=(t(56168),t(55034)),r=t(2215),s=t(54691),u=t(86719),c=t(11112);n.Z=function(e){var n=e.children,t=[c.eG,c.RJ],o="1906529b36f250c02ea69bb12bb98af8",d=(0,s.QB)(t,[(0,a.X)({projectId:o})]).provider,l=(0,u.eI)({autoConnect:!0,connectors:(0,a.gu)({chains:t,version:2,projectId:o}),provider:d}),p=new a.J0(l,t);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.eM,{client:l,children:n}),(0,i.jsx)(r.Eg,{themeZIndex:9999,projectId:o,ethereumClient:p})]})}},46601:function(){}}]);